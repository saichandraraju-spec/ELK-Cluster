input {
  tcp {
    port => 5044
    codec => json_lines  # Correctly configured for JSON input
  }
  tcp {
    port => 5045
    codec => json_lines
    type => "access_log" # <--- NEW TYPE for Access Logs
  }
}

filter {
  # (Optional, but recommended)
  # You can add a filter here to remove the default `message` field Logstash creates
  # and promote the actual JSON body to the root of the event.
  # If your logback encoder is sending the correct format, you might not need a filter.
}

output {
  elasticsearch {
    hosts => ["http://elasticsearch:9200"]
    index => "springboot-logs-%{+YYYY.MM.dd}"
  }
  stdout { codec => rubydebug } # Essential for debugging!
}